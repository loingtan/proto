syntax = "proto3";

package standard;

option go_package = "github.com/loingtan/proto/standard";

import "google/protobuf/any.proto";

// Standard error response structure
message Error {
  // Error code (e.g., INVALID_ARGUMENT, NOT_FOUND, INTERNAL_ERROR)
  string code = 1;
  
  // Human readable error message
  string message = 2;
  
  // Additional error details
  repeated ErrorDetail details = 3;
  
  // Request ID for tracking
  string request_id = 4;
  
  // Timestamp of error occurrence
  int64 timestamp = 5;
}

// Error detail for additional context
message ErrorDetail {
  // Detail type (e.g., field_violation, resource_info)
  string type = 1;
  
  // Detail-specific data
  google.protobuf.Any data = 2;
}

// Field violation for validation errors
message FieldViolation {
  // Field path (e.g., "user.email")
  string field = 1;
  
  // Error description for this field
  string description = 2;
}

// Resource information for resource-related errors
message ResourceInfo {
  // Resource type (e.g., "user", "coupon", "transaction")
  string resource_type = 1;
  
  // Resource identifier
  string resource_id = 2;
  
  // Resource owner (optional)
  string owner = 3;
}

// Standard response wrapper that includes error handling
message StandardResponse {
  // Success indicator
  bool success = 1;
  
  // Error information (only present if success is false)
  Error error = 2;
  
  // Response data (only present if success is true)
  google.protobuf.Any data = 3;
}

// Common error codes
enum ErrorCode {
  ERROR_CODE_UNSPECIFIED = 0;
  ERROR_CODE_INVALID_ARGUMENT = 1;
  ERROR_CODE_NOT_FOUND = 2;
  ERROR_CODE_ALREADY_EXISTS = 3;
  ERROR_CODE_PERMISSION_DENIED = 4;
  ERROR_CODE_UNAUTHENTICATED = 5;
  ERROR_CODE_RESOURCE_EXHAUSTED = 6;
  ERROR_CODE_FAILED_PRECONDITION = 7;
  ERROR_CODE_ABORTED = 8;
  ERROR_CODE_OUT_OF_RANGE = 9;
  ERROR_CODE_UNIMPLEMENTED = 10;
  ERROR_CODE_INTERNAL = 11;
  ERROR_CODE_UNAVAILABLE = 12;
  ERROR_CODE_DATA_LOSS = 13;
  ERROR_CODE_DEADLINE_EXCEEDED = 14;
}